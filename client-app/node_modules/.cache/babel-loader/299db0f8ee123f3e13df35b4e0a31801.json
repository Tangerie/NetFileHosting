{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tangerie/Coding/FileUploader/client-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tangerie/Coding/FileUploader/client-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tangerie/Coding/FileUploader/client-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import FileUpload from\"../components/FileUpload\";import ClipLoader from\"react-spinners/ClipLoader\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UploadRoute(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),curFile=_useState2[0],setCurFile=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var history=useHistory();var handleFileSet=function handleFileSet(file){console.log(file);setCurFile(file);};var submitUpload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(curFile){_context.next=2;break;}return _context.abrupt(\"return\");case 2:formData=new FormData();formData.append(\"formFile\",curFile);formData.append(\"fileName\",curFile.name);try{setStatus(\"uploading\");fetch(\"/file/upload\",{method:\"POST\",body:formData}).then(function(res){return res.text();}).then(function(txt){setStatus(\"done\");history.push(\"/uploaded/\"+txt);}).catch(function(err){setStatus(\"error\");console.error(err);});}catch(ex){console.log(ex);}case 6:case\"end\":return _context.stop();}}},_callee);}));return function submitUpload(){return _ref.apply(this,arguments);};}();if(status==\"uploading\"){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 min-h-screen flex flex-col justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl text-white font-extralight mb-12\",children:\"Uploading...\"}),/*#__PURE__*/_jsx(ClipLoader,{color:\"#ffffff\",loading:true,size:96})]})});}if(status==\"error\"){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 min-h-screen flex flex-col justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl text-white font-extralight mb-12\",children:\"There was an error uploading\"}),/*#__PURE__*/_jsx(\"button\",{className:\"text-white text-lg bg-gray-500 px-6 py-3 mt-8 rounded\",onClick:function onClick(){window.location.reload();},children:\"Try Again\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 min-h-screen flex flex-col justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl text-white font-extralight mb-3\",children:\"Drop here to upload\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl text-gray-400 mb-10 font-light\",children:\"or click to select a file...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-64 border-4 border-gray-500 bg-gray-600 rounded-md\",children:/*#__PURE__*/_jsx(FileUpload,{handleFileUpload:handleFileSet})}),curFile==null?null:/*#__PURE__*/_jsx(\"button\",{onClick:submitUpload,className:\"text-white text-lg bg-gray-500 px-6 py-3 mt-8 rounded\",children:\"Upload File\"})]})});}","map":{"version":3,"sources":["/Users/tangerie/Coding/FileUploader/client-app/src/routes/UploadRoute.tsx"],"names":["useState","FileUpload","ClipLoader","useHistory","UploadRoute","curFile","setCurFile","status","setStatus","history","handleFileSet","file","console","log","submitUpload","formData","FormData","append","name","fetch","method","body","then","res","text","txt","push","catch","err","error","ex","window","location","reload"],"mappings":"gYAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,2BAAvB,CAEA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAGA,cAAe,SAASC,CAAAA,WAAT,EAAuB,CAClC,cAA8BJ,QAAQ,CAAc,IAAd,CAAtC,wCAAOK,OAAP,eAAgBC,UAAhB,eACA,eAA4BN,QAAQ,CAAC,EAAD,CAApC,yCAAOO,MAAP,eAAeC,SAAf,eAEA,GAAMC,CAAAA,OAAO,CAAGN,UAAU,EAA1B,CAEA,GAAMO,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,IAAD,CAAwB,CAC1CC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAL,UAAU,CAACK,IAAD,CAAV,CACH,CAHD,CAKA,GAAMG,CAAAA,YAAY,0FAAG,mJACbT,OADa,iEAGXU,QAHW,CAGA,GAAIC,CAAAA,QAAJ,EAHA,CAIjBD,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA4BZ,OAA5B,EACAU,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA4BZ,OAAO,CAACa,IAApC,EAEA,GAAI,CACAV,SAAS,CAAC,WAAD,CAAT,CACAW,KAAK,CAAC,cAAD,CAAiB,CAClBC,MAAM,CAAE,MADU,CAElBC,IAAI,CAAEN,QAFY,CAAjB,CAAL,CAGGO,IAHH,CAGQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAHX,EAICF,IAJD,CAIM,SAAAG,GAAG,CAAI,CACTjB,SAAS,CAAC,MAAD,CAAT,CACAC,OAAO,CAACiB,IAAR,CAAa,aAAeD,GAA5B,EACH,CAPD,EAQCE,KARD,CAQO,SAAAC,GAAG,CAAI,CACVpB,SAAS,CAAC,OAAD,CAAT,CACAI,OAAO,CAACiB,KAAR,CAAcD,GAAd,EACH,CAXD,EAaH,CAAC,MAAME,EAAN,CAAU,CACRlB,OAAO,CAACC,GAAR,CAAYiB,EAAZ,EACH,CAxBgB,sDAAH,kBAAZhB,CAAAA,YAAY,0CAAlB,CA2BA,GAAGP,MAAM,EAAI,WAAb,CAA0B,CACtB,mBAAO,YAAK,SAAS,CAAC,uDAAf,uBACH,aAAK,SAAS,CAAC,qDAAf,wBACI,WAAI,SAAS,CAAC,2CAAd,0BADJ,cAGI,KAAC,UAAD,EAAY,KAAK,CAAC,SAAlB,CAA4B,OAAO,CAAE,IAArC,CAA2C,IAAI,CAAE,EAAjD,EAHJ,GADG,EAAP,CAOH,CAED,GAAGA,MAAM,EAAI,OAAb,CAAsB,CAClB,mBAAO,YAAK,SAAS,CAAC,uDAAf,uBACH,aAAK,SAAS,CAAC,qDAAf,wBACI,WAAI,SAAS,CAAC,2CAAd,0CADJ,cAGI,eAAQ,SAAS,CAAC,uDAAlB,CAA0E,OAAO,CAAE,kBAAM,CACrFwB,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACH,CAFD,uBAHJ,GADG,EAAP,CASH,CAED,mBAAO,YAAK,SAAS,CAAC,uDAAf,uBACH,aAAK,SAAS,CAAC,qDAAf,wBACI,WAAI,SAAS,CAAC,0CAAd,iCADJ,cAEI,WAAI,SAAS,CAAC,yCAAd,0CAFJ,cAII,YAAK,SAAS,CAAC,6DAAf,uBACI,KAAC,UAAD,EAAY,gBAAgB,CAAEvB,aAA9B,EADJ,EAJJ,CASQL,OAAO,EAAI,IAAX,CAAkB,IAAlB,cAAyB,eAAQ,OAAO,CAAES,YAAjB,CAA+B,SAAS,CAAC,uDAAzC,yBATjC,GADG,EAAP,CAeH","sourcesContent":["import { useState } from \"react\";\nimport FileUpload from \"../components/FileUpload\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { useHistory } from \"react-router-dom\";\n\n\nexport default function UploadRoute() { \n    const [curFile, setCurFile] = useState<File | null>(null);\n    const [status, setStatus] = useState(\"\");\n\n    const history = useHistory();\n\n    const handleFileSet = (file : File | null) => {\n        console.log(file);\n        setCurFile(file);\n    }\n\n    const submitUpload = async () => {\n        if(!curFile) return;\n\n        const formData = new FormData();\n        formData.append(\"formFile\", curFile);\n        formData.append(\"fileName\", curFile.name);\n\n        try {\n            setStatus(\"uploading\");\n            fetch(\"/file/upload\", {\n                method: \"POST\",\n                body: formData\n            }).then(res => res.text())\n            .then(txt => {\n                setStatus(\"done\");\n                history.push(\"/uploaded/\" + txt);\n            })\n            .catch(err => {\n                setStatus(\"error\");\n                console.error(err);\n            });\n\n        } catch(ex) {\n            console.log(ex);\n        }      \n    }\n\n    if(status == \"uploading\") {\n        return <div className=\"bg-gray-900 min-h-screen flex flex-col justify-center\">\n            <div className=\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\">\n                <h1 className=\"text-5xl text-white font-extralight mb-12\">Uploading...</h1>\n                \n                <ClipLoader color=\"#ffffff\" loading={true} size={96}/>\n            </div>\n        </div>;\n    }\n\n    if(status == \"error\") {\n        return <div className=\"bg-gray-900 min-h-screen flex flex-col justify-center\">\n            <div className=\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\">\n                <h1 className=\"text-5xl text-white font-extralight mb-12\">There was an error uploading</h1>\n                \n                <button className=\"text-white text-lg bg-gray-500 px-6 py-3 mt-8 rounded\" onClick={() => {\n                    window.location.reload();\n                }}>Try Again</button>\n            </div>\n        </div>;\n    }\n\n    return <div className=\"bg-gray-900 min-h-screen flex flex-col justify-center\">\n        <div className=\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\">\n            <h1 className=\"text-5xl text-white font-extralight mb-3\">Drop here to upload</h1>\n            <h3 className=\"text-2xl text-gray-400 mb-10 font-light\">or click to select a file...</h3>\n\n            <div className=\"w-full h-64 border-4 border-gray-500 bg-gray-600 rounded-md\">\n                <FileUpload handleFileUpload={handleFileSet}/>\n            </div>\n\n            {\n                curFile == null ? null : <button onClick={submitUpload} className=\"text-white text-lg bg-gray-500 px-6 py-3 mt-8 rounded\">Upload File</button>\n            }\n            \n        </div>\n    </div>;\n}"]},"metadata":{},"sourceType":"module"}