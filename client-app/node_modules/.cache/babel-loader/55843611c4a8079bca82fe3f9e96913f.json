{"ast":null,"code":"import _slicedToArray from\"/Users/tangerie/Coding/FileUploader/client-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{useState}from\"react\";import prettyBytes from\"pretty-bytes\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function FileUpload(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),curFile=_useState2[0],setCurFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),dragging=_useState4[0],setDragging=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),dragCounter=_useState6[0],setDragCounter=_useState6[1];var onFormClick=function onFormClick(){var _document$getElementB;(_document$getElementB=document.getElementById(\"fileUploadInput\"))===null||_document$getElementB===void 0?void 0:_document$getElementB.click();};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full flex flex-col justify-center group cursor-pointer rounded\",onClick:onFormClick,onDragEnter:function onDragEnter(e){e.preventDefault();e.stopPropagation();setDragCounter(dragCounter+1);if(e.dataTransfer.items&&e.dataTransfer.items.length>0){setDragging(true);}},onDragLeave:function onDragLeave(e){e.preventDefault();e.stopPropagation();setDragCounter(dragCounter-1);if(dragCounter>0)return;setDragging(false);},onDragOver:function onDragOver(e){e.preventDefault();e.stopPropagation();},onDrop:function onDrop(e){e.preventDefault();e.stopPropagation();setDragging(false);if(e.dataTransfer.files&&e.dataTransfer.files.length>0){setCurFile(e.dataTransfer.files[0]);props.handleFileUpload(e.dataTransfer.files[0]);//e.dataTransfer.clearData();\nsetDragCounter(0);}},children:[/*#__PURE__*/_jsx(\"form\",{className:\"hidden\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileUploadInput\",onChange:function onChange(event){if(event.target.files!=null&&event.target.files.length>0){props.handleFileUpload(event.target.files[0]);setCurFile(event.target.files[0]);}else{props.handleFileUpload(null);setCurFile(null);}}})}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:curFile==null?\"file-upload\":\"archive\",className:\"mx-auto text-white opacity-50 text-4xl group-hover:opacity-80 transition-opacity ease-in-out\"}),curFile==null?null:/*#__PURE__*/_jsxs(\"p\",{className:\"px-6 text-center mx-auto mt-4 text-white opacity-50 text-xl group-hover:opacity-80 transition-opacity ease-in-out\",children:[curFile.name,/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-300 text-lg\",children:prettyBytes(curFile.size)})]})]});}","map":{"version":3,"sources":["/Users/tangerie/Coding/FileUploader/client-app/src/components/FileUpload.tsx"],"names":["FontAwesomeIcon","useState","prettyBytes","FileUpload","props","curFile","setCurFile","dragging","setDragging","dragCounter","setDragCounter","onFormClick","document","getElementById","click","e","preventDefault","stopPropagation","dataTransfer","items","length","files","handleFileUpload","event","target","name","size"],"mappings":"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","sourcesContent":["import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { useState } from \"react\";\nimport prettyBytes from \"pretty-bytes\";\n\ninterface Props {\n    handleFileUpload : (file : File | null) => void;\n}\n\nexport default function FileUpload(props : Props) {\n    const [curFile, setCurFile] = useState<File | null>(null);\n    const [dragging, setDragging] = useState<boolean>(false);\n    const [dragCounter, setDragCounter] = useState(0);\n    \n    const onFormClick = () => {\n        document.getElementById(\"fileUploadInput\")?.click();\n    }\n\n    return <div className=\"w-full h-full flex flex-col justify-center group cursor-pointer rounded\" onClick={onFormClick} \n    onDragEnter={e => {\n        e.preventDefault();\n        e.stopPropagation();\n        setDragCounter(dragCounter + 1);\n        if(e.dataTransfer.items && e.dataTransfer.items.length > 0) {\n            setDragging(true);\n        }\n    }}\n    \n    onDragLeave={e => {\n        e.preventDefault();\n        e.stopPropagation();\n        setDragCounter(dragCounter - 1);\n        if (dragCounter > 0) return\n        setDragging(false);\n    }}\n    \n    onDragOver={e => {\n        e.preventDefault();\n        e.stopPropagation();\n    }}\n    \n    onDrop={e => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        setDragging(false);\n        if(e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n            setCurFile(e.dataTransfer.files[0]);\n            props.handleFileUpload(e.dataTransfer.files[0]);\n            //e.dataTransfer.clearData();\n            setDragCounter(0);\n        }\n    }}>\n        <form className=\"hidden\">\n            <input type=\"file\" id=\"fileUploadInput\" onChange={(event) => {\n                if(event.target.files != null && event.target.files.length > 0) {\n                    props.handleFileUpload(event.target.files[0]);\n                    setCurFile(event.target.files[0]);\n                } else {\n                    props.handleFileUpload(null);\n                    setCurFile(null);\n                }\n            }}></input>\n        </form>\n        <FontAwesomeIcon icon={curFile == null ? \"file-upload\" : \"archive\"} className=\"mx-auto text-white opacity-50 text-4xl group-hover:opacity-80 transition-opacity ease-in-out\" />\n        {\n            curFile == null ? null : <p className=\"px-6 text-center mx-auto mt-4 text-white opacity-50 text-xl group-hover:opacity-80 transition-opacity ease-in-out\">\n                {curFile.name}<br/> <span className=\"text-gray-300 text-lg\">{prettyBytes(curFile.size)}</span>\n            </p>\n        }\n    </div>;\n}"]},"metadata":{},"sourceType":"module"}