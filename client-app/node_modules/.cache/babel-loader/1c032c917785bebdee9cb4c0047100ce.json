{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tangerie/Coding/FileUploader/client-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tangerie/Coding/FileUploader/client-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tangerie/Coding/FileUploader/client-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import FileUpload from\"../components/FileUpload\";import ClipLoader from\"react-spinners/ClipLoader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UploadRoute(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),curFile=_useState2[0],setCurFile=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),upLoc=_useState6[0],setUpLoc=_useState6[1];var handleFileSet=function handleFileSet(file){console.log(file);setCurFile(file);};var submitUpload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(curFile){_context.next=2;break;}return _context.abrupt(\"return\");case 2:formData=new FormData();formData.append(\"formFile\",curFile);formData.append(\"fileName\",curFile.name);try{setStatus(\"uploading\");fetch(\"/file/upload\",{method:\"POST\",body:formData}).then(function(res){return res.text();}).then(function(txt){setStatus(\"done\");setUpLoc(new URL(\"/download/\"+txt,document.baseURI).href);}).catch(function(err){setStatus(\"error\");console.error(err);});}catch(ex){console.log(ex);}case 6:case\"end\":return _context.stop();}}},_callee);}));return function submitUpload(){return _ref.apply(this,arguments);};}();if(status==\"uploading\"){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 min-h-screen flex flex-col justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl text-white font-extralight mb-12\",children:\"Uploading...\"}),/*#__PURE__*/_jsx(ClipLoader,{color:\"#ffffff\",loading:true,size:96})]})});}if(status==\"done\"){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 min-h-screen flex flex-col justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl text-white font-extralight mb-6\",children:\"Upload Complete\"}),/*#__PURE__*/_jsx(\"a\",{href:upLoc,className:\"text-white block mb-2 hover:underline\",children:upLoc}),/*#__PURE__*/_jsx(\"button\",{className:\"text-white text-lg bg-gray-500 px-6 py-3 mt-8 rounded\",onClick:function onClick(){navigator.clipboard.writeText(upLoc);},children:\"Copy to Clipboard\"})]})});}if(status==\"error\"){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 min-h-screen flex flex-col justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl text-white font-extralight mb-12\",children:\"There was an error uploading\"}),/*#__PURE__*/_jsx(\"button\",{className:\"text-white text-lg bg-gray-500 px-6 py-3 mt-8 rounded\",onClick:function onClick(){window.location.reload();},children:\"Try Again\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 min-h-screen flex flex-col justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl text-white font-extralight mb-3\",children:\"Drop here to upload\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl text-gray-400 mb-10 font-light\",children:\"or click to select a file...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-64 border-4 border-gray-500 bg-gray-600 rounded-md\",children:/*#__PURE__*/_jsx(FileUpload,{handleFileUpload:handleFileSet})}),curFile==null?null:/*#__PURE__*/_jsx(\"button\",{onClick:submitUpload,className:\"text-white text-lg bg-gray-500 px-6 py-3 mt-8 rounded\",children:\"Upload File\"})]})});}","map":{"version":3,"sources":["/Users/tangerie/Coding/FileUploader/client-app/src/routes/UploadRoute.tsx"],"names":["useState","FileUpload","ClipLoader","UploadRoute","curFile","setCurFile","status","setStatus","upLoc","setUpLoc","handleFileSet","file","console","log","submitUpload","formData","FormData","append","name","fetch","method","body","then","res","text","txt","URL","document","baseURI","href","catch","err","error","ex","navigator","clipboard","writeText","window","location","reload"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport FileUpload from \"../components/FileUpload\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\n\nexport default function UploadRoute() { \n    const [curFile, setCurFile] = useState<File | null>(null);\n    const [status, setStatus] = useState(\"\");\n    const [upLoc, setUpLoc] = useState(\"\");\n\n    const handleFileSet = (file : File | null) => {\n        console.log(file);\n        setCurFile(file);\n    }\n\n    const submitUpload = async () => {\n        if(!curFile) return;\n\n        const formData = new FormData();\n        formData.append(\"formFile\", curFile);\n        formData.append(\"fileName\", curFile.name);\n\n        try {\n            setStatus(\"uploading\");\n            fetch(\"/file/upload\", {\n                method: \"POST\",\n                body: formData\n            }).then(res => res.text())\n            .then(txt => {\n                setStatus(\"done\");\n                setUpLoc(new URL(\"/download/\" + txt, document.baseURI).href);\n            })\n            .catch(err => {\n                setStatus(\"error\");\n                console.error(err);\n            });\n\n        } catch(ex) {\n            console.log(ex);\n        }      \n    }\n\n    if(status == \"uploading\") {\n        return <div className=\"bg-gray-900 min-h-screen flex flex-col justify-center\">\n            <div className=\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\">\n                <h1 className=\"text-5xl text-white font-extralight mb-12\">Uploading...</h1>\n                \n                <ClipLoader color=\"#ffffff\" loading={true} size={96}/>\n            </div>\n        </div>;\n    }\n\n    if(status == \"done\") {\n        return <div className=\"bg-gray-900 min-h-screen flex flex-col justify-center\">\n            <div className=\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\">\n                <h1 className=\"text-5xl text-white font-extralight mb-6\">Upload Complete</h1>\n                \n                <a href={upLoc} className=\"text-white block mb-2 hover:underline\">{upLoc}</a>\n                <button className=\"text-white text-lg bg-gray-500 px-6 py-3 mt-8 rounded\" onClick={() => {\n                    navigator.clipboard.writeText(upLoc);\n                }}>Copy to Clipboard</button>\n            </div>\n        </div>;\n    }\n\n    if(status == \"error\") {\n        return <div className=\"bg-gray-900 min-h-screen flex flex-col justify-center\">\n            <div className=\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\">\n                <h1 className=\"text-5xl text-white font-extralight mb-12\">There was an error uploading</h1>\n                \n                <button className=\"text-white text-lg bg-gray-500 px-6 py-3 mt-8 rounded\" onClick={() => {\n                    window.location.reload();\n                }}>Try Again</button>\n            </div>\n        </div>;\n    }\n\n    return <div className=\"bg-gray-900 min-h-screen flex flex-col justify-center\">\n        <div className=\"bg-gray-700 px-10 py-10 mx-auto text-center rounded\">\n            <h1 className=\"text-5xl text-white font-extralight mb-3\">Drop here to upload</h1>\n            <h3 className=\"text-2xl text-gray-400 mb-10 font-light\">or click to select a file...</h3>\n\n            <div className=\"w-full h-64 border-4 border-gray-500 bg-gray-600 rounded-md\">\n                <FileUpload handleFileUpload={handleFileSet}/>\n            </div>\n\n            {\n                curFile == null ? null : <button onClick={submitUpload} className=\"text-white text-lg bg-gray-500 px-6 py-3 mt-8 rounded\">Upload File</button>\n            }\n            \n        </div>\n    </div>;\n}"]},"metadata":{},"sourceType":"module"}